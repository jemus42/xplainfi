<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>LOCO and LOCI ‚Ä¢ xplainfi</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Roboto_Slab-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="LOCO and LOCI">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">xplainfi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/xplainfi.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/loco-loci.html">LOCO and LOCI</a></li>
    <li><a class="dropdown-item" href="../articles/perturbation-importance.html">Perturbation-based Feature Importance Methods</a></li>
    <li><a class="dropdown-item" href="../articles/sage-methods.html">Shapley Additive Global Importance (SAGE)</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jemus42/xplainfi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>LOCO and LOCI</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jemus42/xplainfi/blob/main/vignettes/loco-loci.Rmd" class="external-link"><code>vignettes/loco-loci.Rmd</code></a></small>
      <div class="d-none name"><code>loco-loci.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jemus42.github.io/xplainfi/">xplainfi</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlr3.mlr-org.com" class="external-link">mlr3</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlr3learners.mlr-org.com" class="external-link">mlr3learners</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="leave-one-covariate-out-loco">Leave-One-Covariate-Out (LOCO)<a class="anchor" aria-label="anchor" href="#leave-one-covariate-out-loco"></a>
</h2>
<p>LOCO measures feature importance by comparing model performance with
and without each feature. For each feature, the learner is retrained
without that feature and the performance difference indicates the
feature‚Äôs importance.</p>
<p>For feature
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>,
LOCO is calculated as the difference in expected loss of the model fit
without the feature and the full model:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="normal">LOCO</mtext><mi>j</mi></msub><mo>=</mo><mi>ùîº</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>L</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>Y</mi><mo>,</mo><msub><mi>f</mi><mrow><mo>‚àí</mo><mi>j</mi></mrow></msub><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>X</mi><mrow><mo>‚àí</mo><mi>j</mi></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mo>‚àí</mo><mi>ùîº</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>L</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>Y</mi><mo>,</mo><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>X</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\text{LOCO}_j = \mathbb{E}(L(Y, f_{-j}(X_{-j}))) - \mathbb{E}(L(Y, f(X)))</annotation></semantics></math></p>
<p>Higher values indicate more important features (larger performance
drop when removed).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">task</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tgen</a></span><span class="op">(</span><span class="st">"friedman1"</span><span class="op">)</span><span class="op">$</span><span class="fu">generate</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">200</span><span class="op">)</span></span>
<span><span class="va">learner</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">lrn</a></span><span class="op">(</span><span class="st">"regr.lm"</span><span class="op">)</span></span>
<span><span class="va">measure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">msr</a></span><span class="op">(</span><span class="st">"regr.mse"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">loco</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/LOCO.html">LOCO</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  task <span class="op">=</span> <span class="va">task</span>,</span>
<span>  learner <span class="op">=</span> <span class="va">learner</span>,</span>
<span>  measure <span class="op">=</span> <span class="va">measure</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">loco</span><span class="op">$</span><span class="fu">compute</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Key: &lt;feature&gt;</span></span>
<span><span class="co">#&gt;          feature   importance</span></span>
<span><span class="co">#&gt;           &lt;char&gt;        &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:   important1  1.907472683</span></span>
<span><span class="co">#&gt;  2:   important2  4.344817068</span></span>
<span><span class="co">#&gt;  3:   important3 -0.038993051</span></span>
<span><span class="co">#&gt;  4:   important4  9.868411131</span></span>
<span><span class="co">#&gt;  5:   important5  2.159374339</span></span>
<span><span class="co">#&gt;  6: unimportant1  0.050115133</span></span>
<span><span class="co">#&gt;  7: unimportant2 -0.019501906</span></span>
<span><span class="co">#&gt;  8: unimportant3  0.106014948</span></span>
<span><span class="co">#&gt;  9: unimportant4  0.005096387</span></span>
<span><span class="co">#&gt; 10: unimportant5  0.024761713</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="leave-one-covariate-in-loci">Leave-One-Covariate-In (LOCI)<a class="anchor" aria-label="anchor" href="#leave-one-covariate-in-loci"></a>
</h2>
<p>LOCI measures feature importance by training models with only each
individual feature and comparing their performance to a featureless
(baseline) model. This shows how much predictive power each feature
provides on its own, above and beyond the optimal constant
prediction.</p>
<p>For feature
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>,
LOCI is calculated as the difference in expected loss of the featureless
learner or constant model and the model including only the feature:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="normal">LOCI</mtext><mi>j</mi></msub><mo>=</mo><mi>ùîº</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>L</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>Y</mi><mo>,</mo><msub><mi>f</mi><mi>‚àÖ</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mo>‚àí</mo><mi>ùîº</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>L</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>Y</mi><mo>,</mo><msub><mi>f</mi><mi>j</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>X</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\text{LOCI}_j = \mathbb{E}(L(Y, f_{\emptyset})) - \mathbb{E}(L(Y, f_j(X_{j})))</annotation></semantics></math></p>
<p>Higher values indicate more important features (better individual
performance compared to baseline).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">loci</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/LOCI.html">LOCI</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  task <span class="op">=</span> <span class="va">task</span>,</span>
<span>  learner <span class="op">=</span> <span class="va">learner</span>,</span>
<span>  measure <span class="op">=</span> <span class="va">measure</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">loci</span><span class="op">$</span><span class="fu">compute</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Key: &lt;feature&gt;</span></span>
<span><span class="co">#&gt;          feature  importance</span></span>
<span><span class="co">#&gt;           &lt;char&gt;       &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:   important1  0.24301370</span></span>
<span><span class="co">#&gt;  2:   important2  2.00562769</span></span>
<span><span class="co">#&gt;  3:   important3 -0.24969927</span></span>
<span><span class="co">#&gt;  4:   important4  5.15158778</span></span>
<span><span class="co">#&gt;  5:   important5  1.94506889</span></span>
<span><span class="co">#&gt;  6: unimportant1 -0.02398509</span></span>
<span><span class="co">#&gt;  7: unimportant2  0.08193745</span></span>
<span><span class="co">#&gt;  8: unimportant3  0.37764092</span></span>
<span><span class="co">#&gt;  9: unimportant4  0.24828048</span></span>
<span><span class="co">#&gt; 10: unimportant5  0.16518286</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multiple-refits">Multiple Refits<a class="anchor" aria-label="anchor" href="#multiple-refits"></a>
</h2>
<p>Like PFI has <code>iters_perm</code> for multiple permutation
iterations, LOCO and LOCI support <code>iters_refit</code> for multiple
refit iterations per resampling iteration:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">loco_multi</span> <span class="op">=</span> <span class="va"><a href="../reference/LOCO.html">LOCO</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  task <span class="op">=</span> <span class="va">task</span>,</span>
<span>  learner <span class="op">=</span> <span class="va">learner</span>,</span>
<span>  measure <span class="op">=</span> <span class="va">measure</span>,</span>
<span>  resampling <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">rsmp</a></span><span class="op">(</span><span class="st">"cv"</span>, folds <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>  iters_refit <span class="op">=</span> <span class="fl">3L</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">loco_multi</span><span class="op">$</span><span class="fu">compute</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Key: &lt;feature&gt;</span></span>
<span><span class="co">#&gt;          feature  importance</span></span>
<span><span class="co">#&gt;           &lt;char&gt;       &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:   important1  2.63847146</span></span>
<span><span class="co">#&gt;  2:   important2  6.32614881</span></span>
<span><span class="co">#&gt;  3:   important3 -0.02421940</span></span>
<span><span class="co">#&gt;  4:   important4  8.23092916</span></span>
<span><span class="co">#&gt;  5:   important5  1.87820513</span></span>
<span><span class="co">#&gt;  6: unimportant1  0.04498329</span></span>
<span><span class="co">#&gt;  7: unimportant2 -0.08772072</span></span>
<span><span class="co">#&gt;  8: unimportant3  0.04221687</span></span>
<span><span class="co">#&gt;  9: unimportant4 -0.26932117</span></span>
<span><span class="co">#&gt; 10: unimportant5 -0.07450104</span></span>
<span></span>
<span><span class="co"># Check individual scores with multiple refits</span></span>
<span><span class="va">loco_multi</span><span class="op">$</span><span class="va">scores</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">4</span>, caption <span class="op">=</span> <span class="st">"LOCO scores per refit and resampling fold"</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<caption>LOCO scores per refit and resampling fold</caption>
<colgroup>
<col width="15%">
<col width="14%">
<col width="15%">
<col width="19%">
<col width="19%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th align="left">feature</th>
<th align="right">iter_rsmp</th>
<th align="right">iter_refit</th>
<th align="right">regr.mse_orig</th>
<th align="right">regr.mse_post</th>
<th align="right">importance</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">important1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">5.6039</td>
<td align="right">8.7656</td>
<td align="right">3.1617</td>
</tr>
<tr class="even">
<td align="left">important1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">5.6039</td>
<td align="right">8.7656</td>
<td align="right">3.1617</td>
</tr>
<tr class="odd">
<td align="left">important1</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">5.6039</td>
<td align="right">8.7656</td>
<td align="right">3.1617</td>
</tr>
<tr class="even">
<td align="left">important1</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">6.6815</td>
<td align="right">9.0453</td>
<td align="right">2.3638</td>
</tr>
<tr class="odd">
<td align="left">important1</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">6.6815</td>
<td align="right">9.0453</td>
<td align="right">2.3638</td>
</tr>
<tr class="even">
<td align="left">important1</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">6.6815</td>
<td align="right">9.0453</td>
<td align="right">2.3638</td>
</tr>
<tr class="odd">
<td align="left">important1</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">4.9343</td>
<td align="right">7.3242</td>
<td align="right">2.3899</td>
</tr>
<tr class="even">
<td align="left">important1</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">4.9343</td>
<td align="right">7.3242</td>
<td align="right">2.3899</td>
</tr>
<tr class="odd">
<td align="left">important1</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">4.9343</td>
<td align="right">7.3242</td>
<td align="right">2.3899</td>
</tr>
<tr class="even">
<td align="left">important2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">5.6039</td>
<td align="right">12.2512</td>
<td align="right">6.6473</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="comparing-loco-and-loci">Comparing LOCO and LOCI<a class="anchor" aria-label="anchor" href="#comparing-loco-and-loci"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Combine results for comparison</span></span>
<span><span class="va">importance_combined</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>  <span class="va">loco</span><span class="op">$</span><span class="va">importance</span><span class="op">[</span>, <span class="va">method</span> <span class="op">:=</span> <span class="st">"LOCO"</span><span class="op">]</span>,</span>
<span>  <span class="va">loci</span><span class="op">$</span><span class="va">importance</span><span class="op">[</span>, <span class="va">method</span> <span class="op">:=</span> <span class="st">"LOCI"</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">importance_combined</span> <span class="op">&lt;-</span> <span class="va">importance_combined</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/dcast.data.table.html" class="external-link">dcast</a></span><span class="op">(</span><span class="va">feature</span> <span class="op">~</span> <span class="va">method</span>, value.var <span class="op">=</span> <span class="st">"importance"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">importance_combined</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">4</span>, caption <span class="op">=</span> <span class="st">"LOCO vs LOCI importance scores"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>LOCO vs LOCI importance scores</caption>
<thead><tr class="header">
<th align="left">feature</th>
<th align="right">LOCI</th>
<th align="right">LOCO</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">important1</td>
<td align="right">0.2430</td>
<td align="right">1.9075</td>
</tr>
<tr class="even">
<td align="left">important2</td>
<td align="right">2.0056</td>
<td align="right">4.3448</td>
</tr>
<tr class="odd">
<td align="left">important3</td>
<td align="right">-0.2497</td>
<td align="right">-0.0390</td>
</tr>
<tr class="even">
<td align="left">important4</td>
<td align="right">5.1516</td>
<td align="right">9.8684</td>
</tr>
<tr class="odd">
<td align="left">important5</td>
<td align="right">1.9451</td>
<td align="right">2.1594</td>
</tr>
<tr class="even">
<td align="left">unimportant1</td>
<td align="right">-0.0240</td>
<td align="right">0.0501</td>
</tr>
<tr class="odd">
<td align="left">unimportant2</td>
<td align="right">0.0819</td>
<td align="right">-0.0195</td>
</tr>
<tr class="even">
<td align="left">unimportant3</td>
<td align="right">0.3776</td>
<td align="right">0.1060</td>
</tr>
<tr class="odd">
<td align="left">unimportant4</td>
<td align="right">0.2483</td>
<td align="right">0.0051</td>
</tr>
<tr class="even">
<td align="left">unimportant5</td>
<td align="right">0.1652</td>
<td align="right">0.0248</td>
</tr>
</tbody>
</table>
<p><strong>Interpreting the results:</strong></p>
<ul>
<li>
<strong>LOCO</strong>: Higher values indicate more important
features (larger performance drop when removed)</li>
<li>
<strong>LOCI</strong>: Higher values indicate more important
features (better individual performance compared to baseline)
<ul>
<li>Positive values: feature performs better than featureless
baseline</li>
<li>Negative values: feature performs worse than featureless
baseline</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">importance_combined</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/melt.data.table.html" class="external-link">melt</a></span><span class="op">(</span></span>
<span>    id.vars <span class="op">=</span> <span class="st">"feature"</span>,</span>
<span>    value.name <span class="op">=</span> <span class="st">"score"</span>,</span>
<span>    variable.name <span class="op">=</span> <span class="st">"method"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">score</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">feature</span>, <span class="va">score</span><span class="op">)</span>, color <span class="op">=</span> <span class="va">method</span>, fill <span class="op">=</span> <span class="va">method</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">method</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"dodge"</span>, alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set1"</span>, aesthetics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"color"</span>, <span class="st">"fill"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"LOCO vs LOCI Feature Importance"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Importance Score"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Feature"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Method"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Method"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>    plot.title.position <span class="op">=</span> <span class="st">"plot"</span></span>
<span>  <span class="op">)</span> </span></code></pre></div>
<p><img src="loco-loci_files/figure-html/plot-1.png" width="672"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lukas Burk.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
